@page "/contacts/edit/{ContactId:guid}"
@page "/contacts/add"

@using Conway.CRM.Domain.Entities
@using Conway.CRM.WebUI.Helpers

@using FluentValidation
@inject IValidator<Contact> Validator

<RadzenCard Style="width: 60%;">
    <RadzenTemplateForm TItem="Contact" Data="@Contact" Submit="OnSubmit">
        <RadzenStack Orientation="Orientation.Vertical" Gap="0.25rem">
            <RadzenFieldset Text="Contact Details">

                <RadzenStack Orientation="Orientation.Vertical" Gap="0.25rem">

                    <RadzenRow AlignItems="AlignItems.Center" RowGap="0.25rem">
                        <RadzenColumn Size="12" SizeMD="4" class="rz-text-align-start rz-text-align-md-end">
                            <RadzenLabel Text="Select Customer" />
                        </RadzenColumn>
                        <RadzenColumn Size="12" SizeMD="8">
                            <RadzenDropDown @bind-Value="Contact.CustomerId" Data="@CustomerList" Name="CustomerId" TextProperty="CompanyName" ValueProperty="Id" Style="width:100%" class="@ValidationHelper.GetValidationClass(nameof(Contact.CustomerId), validationErrors)"></RadzenDropDown>
                        </RadzenColumn>
                    </RadzenRow>

                    <RadzenRow AlignItems="AlignItems.Center" RowGap="0.25rem">
                        <RadzenColumn Size="12" SizeMD="4" class="rz-text-align-start rz-text-align-md-end">
                            <RadzenLabel Text="First Name" />
                        </RadzenColumn>
                        <RadzenColumn Size="12" SizeMD="8">
                            <RadzenTextBox @bind-Value="Contact.FirstName" Style="width:100%" Name="FirstName" class="@ValidationHelper.GetValidationClass(nameof(Contact.FirstName), validationErrors)" />
                        </RadzenColumn>
                    </RadzenRow>

                    <RadzenRow AlignItems="AlignItems.Center" RowGap="0.25rem">
                        <RadzenColumn Size="12" SizeMD="4" class="rz-text-align-start rz-text-align-md-end">
                            <RadzenLabel Text="Last Name" />
                        </RadzenColumn>
                        <RadzenColumn Size="12" SizeMD="8">
                            <RadzenTextBox @bind-Value="Contact.LastName" Style="width:100%" Name="LastName" class="@ValidationHelper.GetValidationClass(nameof(Contact.LastName), validationErrors)" />
                        </RadzenColumn>
                    </RadzenRow>

                    <RadzenRow AlignItems="AlignItems.Center" RowGap="0.25rem">
                        <RadzenColumn Size="12" SizeMD="4" class="rz-text-align-start rz-text-align-md-end">
                            <RadzenLabel Text="Email" />
                        </RadzenColumn>
                        <RadzenColumn Size="12" SizeMD="8">
                            <RadzenTextBox @bind-Value="Contact.Email" Style="width:100%" Name="Email" class="@ValidationHelper.GetValidationClass(nameof(Contact.Email), validationErrors)" />
                        </RadzenColumn>
                    </RadzenRow>

                    <RadzenRow AlignItems="AlignItems.Center" RowGap="0.25rem">
                        <RadzenColumn Size="12" SizeMD="4" class="rz-text-align-start rz-text-align-md-end">
                            <RadzenLabel Text="Phone" />
                        </RadzenColumn>
                        <RadzenColumn Size="12" SizeMD="8">
                            <RadzenTextBox @bind-Value="Contact.PhoneNumber" Style="width:100%" Name="PhoneNumber" />
                        </RadzenColumn>
                    </RadzenRow>

                </RadzenStack>
            </RadzenFieldset>
            <RadzenStack Orientation="Orientation.Horizontal">
                <RadzenButton Icon="save" Text="Save" ButtonType="ButtonType.Submit" Shade="Shade.Light" ButtonStyle="ButtonStyle.Success" />
                <RadzenButton Icon="cancel" Text="Cancel" Click="@CancelAdd" Shade="Shade.Light" ButtonStyle="ButtonStyle.Danger" />
            </RadzenStack>
        </RadzenStack>
    </RadzenTemplateForm>
</RadzenCard>